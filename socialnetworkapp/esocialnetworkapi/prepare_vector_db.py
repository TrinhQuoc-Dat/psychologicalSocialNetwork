from langchain.text_splitter import RecursiveCharacterTextSplitter, CharacterTextSplitter
from langchain_community.document_loaders import PyPDFLoader, DirectoryLoader, Docx2txtLoader
from langchain_community.vectorstores import FAISS
from langchain_openai import OpenAIEmbeddings
from langchain_huggingface import HuggingFaceEmbeddings
from langchain.schema import Document
from collections import Counter
from libpy import libSupport
import os
import re
import unicodedata


BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
DATA_PATH = os.path.join(BASE_DIR, "esocialnetworkapi", "resources", "data")
DB_PATH = os.path.join(BASE_DIR, "esocialnetworkapi", "vectorstores", "db_faiss")

# Khai bao bien
pdf_data_path = "resources\data"
vector_db_path = "vectorstores/db_faiss"

# Embedding model dùng HuggingFace
embedding_model = HuggingFaceEmbeddings(model_name="sentence-transformers/all-MiniLM-L6-v2")

# embedding_model_openai = OpenAIEmbeddings()

def preprocess_text(text: str) -> str:
    # 1. Chuẩn hóa Unicode (loại bỏ lỗi encoding từ PDF/DOCX)
    text = unicodedata.normalize("NFC", text)

    # 2. Xóa ký tự điều khiển, ký tự không in được
    text = re.sub(r"[\x00-\x1f\x7f-\x9f]", " ", text)

    # 3. Loại bỏ bullet, ký hiệu đặc biệt thường gặp trong PDF
    text = re.sub(r"[•●▪■◆◇▶►]", " ", text)

    # 4. Loại bỏ nhiều dấu chấm hoặc ký hiệu thừa
    text = re.sub(r"\.{2,}", ".", text)   # ... → .
    text = re.sub(r"[-–—]{2,}", "-", text) # --- → -

    # 5. Loại bỏ URL, email (nếu có, tránh làm nhiễu vector)
    text = re.sub(r"http\S+|www\S+", " ", text)
    text = re.sub(r"\S+@\S+", " ", text)
    # 6. Xóa khoảng trắng thừa, xuống dòng thừa
    text = re.sub(r"\s+", " ", text).strip()

    return text


# Ham 2. Tao vector DB tu cac file PDF
def create_db_from_files_openai():
     # Đọc PDF
    loader_pdf = DirectoryLoader(pdf_data_path, glob="*.pdf", loader_cls=PyPDFLoader)
    documents_pdf = loader_pdf.load()

    # Đọc DOCX
    loader_docx = DirectoryLoader(pdf_data_path, glob="*.docx", loader_cls=Docx2txtLoader)
    documents_docx = loader_docx.load()

    # Gộp tất cả lại
    documents = documents_pdf + documents_docx
    # Làm sạch trước khi split
    cleaned_documents  = [
        Document(page_content=preprocess_text(doc.page_content), metadata=doc.metadata)
        for doc in documents
    ]

    text_splitter = RecursiveCharacterTextSplitter(chunk_size=2048, chunk_overlap=256)
    chunks = text_splitter.split_documents(cleaned_documents)

    db = FAISS.from_documents(chunks, embedding_model)
    db.save_local(vector_db_path)
    print(f"FAISS DB đã được lưu tại: {vector_db_path}")
    return db

# Ham 1. Tao ra vector DB tu 1 doan text
def create_db_from_text():
    raw_text = """Nhằm đáp ứng nhu cầu và thị hiếu của khách hàng về việc sở hữu số tài khoản đẹp, dễ nhớ, giúp tiết kiệm thời gian, mang đến sự thuận lợi trong giao dịch. Ngân hàng Sài Gòn – Hà Nội (SHB) tiếp tục cho ra mắt tài khoản số đẹp 9 số và 12 số với nhiều ưu đãi hấp dẫn.
    Cụ thể, đối với tài khoản số đẹp 9 số, SHB miễn phí mở tài khoản số đẹp trị giá 880.000đ; giảm tới 80% phí mở tài khoản số đẹp trị giá từ 1,1 triệu đồng; phí mở tài khoản số đẹp siêu VIP chỉ còn 5,5 triệu đồng.
    Đối với tài khoản số đẹp 12 số, SHB miễn 100% phí mở tài khoản số đẹp, khách hàng có thể lựa chọn tối đa toàn bộ dãy số của tài khoản. Đây là một trong những điểm ưu việt của tài khoản số đẹp SHB so với thị trường. Ngoài ra, khách hàng có thể lựa chọn số tài khoản trùng số điện thoại, ngày sinh, ngày đặc biệt, hoặc số phong thủy mang lại tài lộc cho khách hàng trong quá trình sử dụng.
    Hiện nay, SHB đang cung cấp đến khách hàng 3 loại tài khoản số đẹp: 9 số, 10 số và 12 số. Cùng với sự tiện lợi khi giao dịch online mọi lúc mọi nơi qua dịch vụ Ngân hàng số, hạn chế rủi ro khi sử dụng tiền mặt, khách hàng còn được miễn phí chuyển khoản qua mobile App SHB, miễn phí quản lý và số dư tối thiểu khi sử dụng tài khoản số đẹp của SHB.
    Ngoài kênh giao dịch tại quầy, khách hàng cũng dễ dàng mở tài khoản số đẹp trên ứng dụng SHB Mobile mà không cần hồ sơ thủ tục phức tạp.
    Hướng mục tiêu trở thành ngân hàng số 1 về hiệu quả tại Việt Nam, ngân hàng bán lẻ hiện đại nhất và là ngân hàng số được yêu thích nhất tại Việt Nam, SHB sẽ tiếp tục nghiên cứu và cho ra mắt nhiều sản phẩm dịch vụ số ưu việt cùngchương trình ưu đãi hấp dẫn, mang đến cho khách hàng lợi ích và trải nghiệm tuyệt vời nhất.
    Để biết thêm thông tin về chương trình, Quý khách vui lòng liên hệ các điểm giao dịch của SHB trên toàn quốc hoặc Hotline. Tâm thần phân liệt là một rối loạn tâm thần mãn tính nghiêm trọng, gây ảnh hưởng lên quá trình suy nghĩ, hành động, thể hiện cảm xúc, nhìn nhận thực tế, và tương tác với người khác của người bệnh.
      Mặc dù tâm thần phân liệt không quá phổ biến như những dạng bệnh lý tâm thần thường gặp khác, nhưng nó có lẽ là bệnh lý dai dẳng và khó nhằn nhất.Những người mắc tâm thần phân liệt thường gặp vấn đề trong cộng đồng, tại nơi làm việc, trường học và trong các mối quan hệ. Họ rụt rè, luôn cảm thấy hoảng sợ, 
      và còn bị mất kết nối với thực tại. Bệnh lý mãn tính cả đời này không thể chữa khỏi nhưng có thể được kiểm soát bằng các hình thức điều trị phù hợp.Trái với hầu hết những gì người ta nghĩ, tâm thần phân liệt không phải là tình trạng chia tách nhân cách hay đa nhân cách. Tâm thần phân liệt là một chứng loạn thần, một dạng bệnh lý tâm thần khi người bệnh không thể phân biệt đâu là thực, 
      đâu là cái họ tưởng tượng ra. Nhiều khi, người mắc các chứng loạn thần mất đi kết nối với thực tại. 
      Thế giới trong họ có lẽ giống như một mớ hỗn độn những suy nghĩ, hình ảnh, và âm thanh rối rắm.
        Hành vi của họ có thể sẽ vô cùng lạ lùng và thậm chí là gây sốc. 
        Sự thay đổi bất chợt trong tính cách và hạnh vi xảy ra khi người ta mất kết nối với thực tại được gọi là một giai đoạn (hay một “pha”) loạn thần.Mức độ nghiêm trọng của tâm thần phân liệt khác nhau tùy người.
          How severe schizophrenia is varies from person to person.
          Một số người chỉ có một giai đoạn loạn thần, trong khi đó nhiều người khác lại có nhiều giai đoạn loạn thần trong suốt cuộc đời, nhưng họ vẫn sống tương đối bình thường trong khoảng thời gian giữa các giai đoạn này. Tuy nhiên, một số khác gặp rắc rối trong cuộc sống theo thời gian mà ít có chuyển biến tốt nào giữa các lần xuất hiện pha loạn thần. Triệu chứng của tâm thần phân liệt có vẻ sẽ nghiêm trọng hơn và lại chuyển biến tốt trong những chu kỳ gọi là “tái phát” và “thuyên giảm.”Những triệu chứng sớm của tâm thần phân liệt. What Are the Early Symptoms of Schizophrenia?Bệnh lý này thường xuất hiện triệu chứng đầu tiên ở nam giới trong khoảng cuối những năm tháng vị thành niên hoặc đầu những năm 20 tuổi. Hầu hết đều gây ảnh hưởng lên phụ nữ trong khoảng đầu những năm 20 tuổi đến những năm 30 tuổi. Khoảng thời gian các triệu chứng xuất hiện lần đầu và trước khi tiến triển thành tâm thần phân liệt hoàn chỉnh được gọi là giai đoạn tiền phát. Nó có thể kéo dài nhiều ngày, nhiều tuần, thậm chí nhiều năm. Giai đoạn này có thể rất khó để phát hiện bệnh vì thường sẽ không xuất hiện yếu tố châm ngòi cụ thể nào. Bạn có thể chỉ quan sát thấy một chút thay đổi nhẹ trong hành vi, đặc biệt là ở trẻ vị thành niên. Bao gồm:Các triệu chứng theo chiều tăng của Tâm thần phân liệt. Positive Symptoms of SchizophreniaTrong trường hợp này, từ “theo chiều hướng tăng” không có nghĩa là “tốt”. Nó là những suy nghĩ và hành động không dựa trên hiện thực của người bệnh. Đôi khi còn được gọi là nhóm triệu chứng loạn thần, bao gồm:– Hoang tưởng: Người bệnh sẽ xuất hiện những niềm tin sai lệch, lộn xộn đôi lúc kỳ lạ và không dựa trên những điều có thật, và rằng người bệnh sẽ không từ bỏ chúng, dù ai đó có cho họ thấy những điều có thật. Ví dụ, một người mắc ảo giác tin rằng con người có thể nghe được suy nghĩ, rằng họ là Thượng Đế hoặc ma quỷ, hoặc rằng người khác đang sắp đặt những suy nghĩ vào trong đầu họ hoặc âm mưu ám hại họ.– Ảo giác: Cảm giác những điều không thật. Nghe thấy ai đó nói bên tai là dạng ảo giác phổ biến nhất ở những người mắc tâm thần phân liệt. Giọng nói đó có thể đưa ra bình phẩm về hành vi của chủ thể, sỉ nhục họ, hoặc ra lệnh cho họ. Những dạng ảo giác ít gặp hơn bao gồm nhìn thấy thứ không có thật, ngửi thấy mùi lạ, miệng có vị lạ, và cảm giác trên da dù không có gì động vào cơ thể.– Căng trương lực: Ở bệnh lý này, người bệnh có thể ngừng nói, và cơ thể bị bất động ở một tư thế trong khoảng thời gian rất lâu.Những triệu chứng rối loạn trong tâm thần phân liệt: Disorganized Symptoms of SchizophreniaNhững triệu chứng tích cực cho thấy chủ thể không thể suy nghĩ rõ ràng và phản hồi đúng theo mong đợi. Ví dụ bao gồm:Các triệu chứng theo chiều hướng giảm của tâm thần phân liệt. Negative Symptoms of SchizophreniaTừ “chiều hướng giảm’ ở đây không có nghĩa là “tệ”. Nó chỉ sự vắng mặt của một số hành vi bình thường ở người mắc tâm thần phân liệt.Nguyên nhân. What Causes Schizophrenia?Nguyên nhân chính xác của tâm thần phân liệt vẫn chưa được tìm ra. Nhưng cũng tương tự như ung thư và đái tháo đường, tâm thần phân liệt là một bệnh lý có thật, tồn tại theo nền tảng sinh học. Các nhà nghiên cứu đã phát hiện ra một số yếu tố có thể khiến một người có khả năng mắc tâm thần phân liệt cao hơn, bao gồm:– Gen (Di truyền): Tâm thần phân liệt có thể truyền đi trong gia đình, có nghĩa là cha mẹ mắc tâm thần phân liệt thì con có thể cũng bị truyền lại căn bệnh này.– Hệ thống mạch và các chất hóa học trong não: Người mắc tâm thần phân liệt không thể điều tiết được các chất hóa học trong não, gọi là các chất dẫn truyền thần kinh kiểm soát một số dường dẫn thần kinh nhất định, “hệ thống mạch” của các tế báo thần kinh ảnh hưởng lên suy nghĩ và hành vi.– Sự bất thường trong não: Nghiên cứu đã phát hiện ra kết cấu bất thường trong não của người mắc tâm thần phân liệt. Nhưng điều này không áp dụng cho tất cả người mắc căn bệnh này. Nó có thể ảnh hưởng lên cả những người không mắc bệnh.– Môi trường: Những thứ như lây nhiễm virus, tiếp xúc với chất độc như cần sa, hoặc những tình huống cực kỳ căng thẳng có thể châm ngòi làm xuất hiện tâm thần phân liệt ở những người có gen khiến họ dễ mắc rối loạn này. Tâm thần phân liệt xuất hiện thường xuyên hơn khi cơ thể có thay đổi về hormone và thể chất, như những người trong những năm tháng vị thành niên và người trẻ tuổi.Đối tượng mắc tâm thần phân liệt. Who Gets Schizophrenia?Bất cứ ai cũng có thể mắc tâm thần phân liệt. Nó tác động lên mọi người trên khắp thế giới, từ tất cả các chủng tộc và các nền văn hóa. Mặc dù nó có thể xuất hiện ở bất kỳ độ tuổi nào, nhưng căn bệnh này thường xuất hiện lần đầu ở nhóm vị thành niên hoặc những người trong độ tuổi 20. Rối loạn này ảnh hưởng như nhau lên nam giới và phụ nữ, mặc dù các triệu chứng thường xuất hiện sớm hơn ở đàn ông. Triệu chứng xuất hiện càng sớm thì bệnh càng có xu hướng trở nặng. Trẻ từ 5 tuổi trở lên đã có thể mắc tâm thần phân liệt, nhưng khá hiếm gặp cho đến những năm thanh thiếu niên.Chẩn đoán. How Is Schizophrenia Diagnosed?Nếu triệu chứng của tâm thần phân liệt xuất hiện, bác sĩ sẽ thực hiện kiểm tra tiền sử bệnh và có khi sẽ thăm khám trực tiếp. Mặc dù không có xét nghiệm chính thức nào để chẩn đoán tâm thần phân liệt, nhưng bác sĩ vẫn có thể thực hiện nhiều xét nghiệm khác, có thể là xét nghiệm máu, chụp quét não, để loại trừ tình trạng ngộ độc hoặc các bệnh lý khác (loạn thần do sử dụng chất) khỏi các triệu chứng của tâm thần phân liệt.Nếu bác sĩ không tìm ra được lý do cụ thể nào giải thích cho các triệu chứng tâm thần phân liệt thì họ có thể sẽ chuyển gửi bệnh nhân đến một bác sĩ tâm thần hoặc một nhà tâm lý học, nói chung là các chuyên gia sức khỏe tâm thần để chẩn đoán và điều trị các bệnh lý tâm thần. Bác sĩ tâm thần và bác sĩ tâm lý thường sử dụng các bài phỏng vấn và các công cụ đánh giá được xây dựng kỹ càng để đánh giá liệu khách hàng có mắc một rối loạn loạn thần hay không. Trị liệu viên cung cấp trị liệu dựa vào chẩn đoán trên báo cáo triệu chứng của bệnh nhân, gia đình họ và quan sát của chính bản thân về thái độ và hành vi của người bệnh.Một người bị chẩn đoán mắc tâm thần phân liệt nếu có xuất hiện ít nhất 2 triệu chứng dưới đây trong ít nhất 6 tháng:Trong suốt 6 tháng, người bệnh phải có một tháng xuất hiện các triệu chứng liên tục và rõ ràng (có thể triệu chứng sẽ bớt nếu điều trị thành công). Các triệu chứng phải ảnh hưởng tiêu cực lên đời sống xã hội hoặc công việc và nguyên nhân xuất hiện không do bởi những bệnh lý khác.Điều trị như thế nào? How Is Schizophrenia Treated?Mục tiêu điều trị tâm thần phân liệt là để xóa bỏ các triệu chứng và giảm thiểu khả năng tái phát hay tái xuất hiện các triệu chứng. Điều trị tâm thần phân liệt có thể bao gồm:– Điều trị bằng thuốc: Những loại thuốc chính để điều trị tâm thần phân liệt được gọi là thuốc chống loạn thần. Những thuốc này không chữa khỏi được căn bệnh nhưng có thể giúp giảm bớt hầu hết các triệu chứng khó chịu, bao gồm hoang tưởng, ảo giác và suy nghĩ sai lệch.Chlorpromazine (Thorazine)Fluphenazine (Prolixin)Haloperidol (Haldol)Oxilapine (Loxapine)Perphenazine (Trilafon)Thiothixene (Navane)Trifluoperazine (Stelazine)Aripiprazole (Abilify)Aripiprazole Lauroxil (Aristada)Asenapine (Saphris)Brexpiprazole (Rexulti)Cariprazine (Vraylar)Clozapine (Clozaril)Iloperidone (Fanapt)Lurasidone (Latuda)Olanzapine (Zyprexa)Paliperidone (Invega Sustenna)Paliperidone Palmitate (Invega Trinza)Quetiapine (Seroquel)Risperidone (Risperdal)Ziprasidone (Geodon)Lưu ý: Clozapine là loại thuốc được FDA chấp thuận để điều trị tâm thần phân liệt mà vẫn không ảnh hưởng đến những phác đồ điều trị khác. Nó cũng được sử dụng để giảm thiểu các hành vi tự sát ở những người mắc tâm thần phân liệt có nguy cơ cao.Chăm sóc tích hợp đặc biệt (CSC): Đây là một phương pháp được thực hiện bởi một nhóm đội ngũ nhân viên điều trị tâm thần phân liệt ngay từ khi triệu chứng đầu tiên xuất hiện. Phương pháp này kết hợp điều trị bằng thuốc và trị liệu kết hợp dịch vụ hỗ trợ xã hội, việc làm, và can thiệp giáo dục. Gia đình cũng được khuyến khích tham gia tối đa. Điều trị sớm là chìa khóa giúp bệnh nhận có một cuộc sống bình thường.Tâm lý trị liệu: Trong khi thuốc điều trị có thể giúp giảm bớt các triệu chứng của bệnh, thì có rất nhiều các hình thức can thiệp tâm lý xã hội có thể giúp giải quyết các vấn đề về hành vi, tâm lý, xã hội và việc làm có liên đới với căn bệnh. Qua trị liệu, bệnh nhân cũng sẽ học cách kiểm soát những triệu chứng, xác định những dấu hiệu cảnh báo sớm cho tình trạng tái phát, và tự bắt đầu xây dựng kế hoạch dự phòng tái phát. Các hình thức tâm lý trị liệu bao gồm:– Tái hòa nhập, tập trung vào các kỹ năng xã hội và đào tạo việc làm giúp người bệnh tâm thần phân liệt sống tốt trong cộng đồng và càng tự chủ càng tốt.– Nhận thức trị liệu, bao gồm các kỹ thuật học tập nhằm cải thiện giải quyết các vấn đề trong khâu xử lý thông tin. Nó thường sử dụng các đợt tập luyện, huấn luyện và các bài tập bằng máy vi tính nhằm tăng cường năng lực của não bộ bao gồm khả năng tập trung, trí nhớ, khả năng lên kế hoạch và óc tổ chức.– Trị liệu cá nhân, có thể giúp người bệnh hiểu rõ hơn căn bệnh của bản thân và học các kỹ năng đối phó và xử lý vấn đề.– Trị liệu gia đình, có thể giúp các gia đình có người mắc tâm thần phân liệt, giúp họ hỗ trợ tốt hơn cho người thân của mình.– Trị liệu nhóm/nhóm hỗ trợ, có thể mang đến hỗ trợ qua lại liên tục cho các thành viênĐiều trị nội trú: Nhiều người bệnh tâm thần phân liệt có thể được điều trị ngoại trú, nhưng nhập viện có thể là lựa chọn tốt nhất cho những người:– Liệu pháp sốc điện (ECT): Trong quy trình này, điện cực được gắn vào da đầu của người bệnh. Sau khi bệnh nhân được cho gây mê toàn thân và rơi vào trạng thái ngủ, bác sĩ sẽ gây một cú sốc điện nhỏ vào não. Một đợt ETC thường bao gồm 2-3 lần điều trị một tuần, kéo dài trong một vài tuần. Mỗi lần gây sốc điện sẽ làm xuất hiện một cơn co giật có kiểm soát ở bệnh nhân. Một loạt các hình thức điều trị khác nhau trong thời gian lâu dài sẽ giúp bệnh nhân cải thiện tâm trạng và suy nghĩ. Các nhà khoa học không hoàn toàn hiểu được cơ chế chính xác làm thế nào mà ETC và các cơn co giật có kiểm soát lại hiệu quả, nhưng một số nhà nghiên cứu cho rằng các cơn co giật do ETC gây ra có thể tác động lên sự phóng thích các chất dẫn truyền thần kinh trong não. ETC chưa được chứng minh hiệu quả lên tâm thần phân liệt rõ ràng như rối loạn lưỡng cực hay trầm cảm, vậy nên người ta không thường sử dụng nó khi bệnh nhân không có triệu chứng về khí sắc (tâm trạng). Liệu pháp này có thể hữu ích khi các hình thức điều trị khác không có tác dụng, hay khi tình trạng trầm cảm và căng trương lực trầm trọng gây khó khăn cho quá trình điều trị tâm thần phân liệt ở người bệnh.Nghiên cứu: Các nhà nghiên cứu đang tìm hiểu một quy trình có tên là phẫu thuật kích thích não sâu (DBS) để điều trị tâm thần phân liệt. Bác sĩ sẽ phẫu thuật cấy điện cực vào não để kích thích một số vùng nhất định được cho là đảm nhận điều khiển suy nghĩ và nhận thức của cơ quan này. DBS là một phương pháp điều trị được thiết lập riêng cho những ca Parkinson nặng và chứng run vô căn nghiêm trọng, nhưng nó vẫn là một phương pháp trong giai đoạn thực nghiệm để điều trị các rối loạn tâm thần.Người mắc tâm thần phân liệt có nguy hiểm không? Are People With Schizophrenia Dangerous?Nhiều sách truyện, phim ảnh đại chúng thường mô tả những người mắc tâm thần phân liệt và những chứng bệnh tâm thần khác là những kẻ nguy hiểm và bạo lực. Điều này không phải lúc nào cũng đúng. Hầu hết những người mắc tâm thần phân liệt không có tính bạo lực. Mà nói đúng hơn thì họ thích co cụm và muốn được ở một mình hơn. Khi người mắc bệnh tâm thần thực sự có hành vi bạo lực và gây nguy hiểm thì nói chung, đó là kết quả của chứng loạn thần và nỗi sợ hãi rằng bản thân đang bị đe dọa theo một cách nào đó bởi môi trường quanh mình. Ma túy và chất có cồn cũng có thể khiến mọi chuyện tồi tệ hơn.Mặt khác, người mắc tâm thần phân liệt có thể là một mối đe dọa với chính bản thân họ. Tự sát là nguyên nhân hàng đầu cho tỷ lệ tử vong sớm trong nhóm người mắc bệnh lý này.Đầu ra điều trị nào cho người mắc tâm thần phân liệt? What Is the Outlook for People With Schizophrenia?Nếu được điều trị phù hợp, hầu hết người bệnh có thể sống một cuộc sống có ích và có ý nghĩa. Tùy thuộc vào mức độ trầm trọng của bệnh, tiến độ bình phục và mức độ tuân thủ điều trị của từng cá nhân mà họ có thể sống với gia đình hoặc trong cộng đồng mà không phải điều trị nội trú lâu dài trong các bệnh viện tâm thần.Nhiều nghiên cứu về não bộ và sự xuất hiện của các rối loạn trong não bộ vẫn đang tiếp diễn, từ đây đưa đến khả năng nhiều loại thuốc hiệu quả với ít tác dụng phụ hơn sẽ được giới thiệu trong tương lai.Có thể dự phòng tâm thần phân liệt không? Can Schizophrenia Be Prevented?Hiện nay vẫn chưa có cách giúp dự phòng tâm thần phân liệt. Tuy nhiên, chẩn đoán và điều trị sớm có thể tránh hoặc xóa bỏ tình trạng tái phát và nhập viện liên tục, và giúp giảm bớt gián đoạn gây ra trong đời sống, gia đình và các mối quan hệ của người bệnh. Nguồn tham khảo: SOURCES:National Institute of Mental Health: “Schizophrenia.”MedicineNet.com: “Schizophrenia.”National Alliance on Mental Illness: “Schizophrenia.”Johns Hopkins Medicine: “Schizophrenia.”Brain & Behavior Research Foundation: “Schizophrenia.”Sunovion Pharmaceuticals Inc.Medscape: “What are the DSM-5 criteria for schizophrenia?”Nguồn: https://www.webmd.com/schizophrenia/mental-health-schizophrenia#1Như Trang",
          Tâm lý học so sánh (Comparative Psychology) là một nhánh của tâm lý học có liên quan đến việc nghiên cứu hành vi của động vật. Các nghiên cứu hiện đại về hành vi của động vật được khởi nguồn từ công trình của Charkes Darwin và Georges Romanes, và lĩnh vực này đã phát triển trở thành một chủ đề giao thoa đa ngành. Ngày nay, các nhà sinh vật học, tâm lý học, nhân chủng học, sinh thái học, các nhà nghiên cứu về gen di truyền và rất nhiều người thuộc các nhóm ngành khác đã không ngừng đóng góp vào quá trình nghiên cứu về hành vi động vật.Ngành học này thường sử dụng phương pháp so sánh để nghiên cứu hành vi của động vật. Phương pháp so sánh ở đây là so sánh sự tương đồng và khác biệt giữa các loài nhằm hiểu được các mối quan hệ tiến hóa. Phương pháp so sánh có thể cũng được sử dụng để so sánh các loài động vật hiện hay với các giống loài tổ tiên.Lược sử. A Brief HistoryPierre Flourens, một học trò của Charles Darwin và George Romanes đã trở thành người đầu tiên sử dụng thuật ngữ này trong cuốn sách “Tâm lý học so sánh” xuất bản năm 1864. Năm 1882, Romanes xuất bản cuốn sách “Trí thông minh động vật”, trong đó ông giới thiệu một ngành khoa học và một hệ thống so sánh hành vi của động vật và con người. Những nhà khoa học quan tọng khác trong trường phái này còn có C. Lloyd Morgan và Konrad Lorenz.Sự phát triển của tâm lý học so sánh cũng bị ảnh hưởng bởi các nhà tâm lý học về quá trình học tập, bao gồm Ivan Pavlov và Edward Thorndike, và các nhà tâm lý học hành vi, như John B. Watson và B. F. Skinner.Tại sao phải nghiên cứu hành vi của động vật? Why Study Animal Behavior?Nghiên cứu hành vi của động vật và so sánh các giống loài khác nhau có thể mang đến thông tin hữu ích về hành vi của con người.– Để có cái nhìn thấu đáo về các quá trình tiến hóa. Hiệp Hội Khoa Học Thần Kinh và Tâm Lý Học So Sánh, một đơn vị thuộc Hiệp Hội Tâm Lý Hoa Kỳ, cho rằng nhìn vào những điểm tương đồng và khác biệt giữa hành vi của con người và động vật có thể rất hữu ích giúp ta có cái nhìn thấu đáo về quá trình phát triển và tiến hóa.– Để tổng quát hóa thông tin về nhân loại. Một mục đích khác của việc nghiên cứu về hành vi của động vật, hy vọng là, một số các quan sát này có thể được tổng quát hóa lên con người. Theo dòng lịch sử, nghiên cứu về động vật đã được sử dụng để kiểm tra xem một loại thuốc điều trị nào đó có an toàn và phù hợp hay một số quy trình phẫu thuật có hiệu quả trên con người hay không, và để xem xem một số cách thức học tập nhất định có thể hữu dụng trong bối cảnh lớp học hay không.Hãy cùng xem xét công trình nghiên cứu về học tập và các nhà tư tưởng theo thuyết hành vi. Nghiên cứu về điều kiện hóa của Ivan Pavlov mô tả động vật có thể được huấn luyện để tiết nước bọt khi nghe tiếng chuông. Công trình này đã được đón nhận và áp dụng trong các chương trình huấn luyện cho con người. Nghiên cứu của B. F. Skinner trên chuột và chim bồ câu cũng thu về những góc hiểu thấu đáo về quá trình điều kiện hóa từ kết quả, sau đó có thể áp dụng lên các tình huống với con người.Điều kiện hóa từ kết quả là gì và học thuyết này vận hành ra sao? What is Operant Conditioning and How Does It Work?Tâm lý học so sánh cũng được sử dụng để tìm hiểu các quá trình phát triển. Trong các thí nghiệm nổi tiếng của Konrad Loen về đặc tính hòa mình với đồng loại, ông đã phát hiện ra ngỗng và vịt đều có một giai đoạn then chốt trong quá trình phát triển là khi chúng phải bám víu vào một nhận vật nào đó đóng vvai trò làm cha mẹ, một quá trình được biết đến với tên gọi là Hòa nhập đồng loại. Loen thậm chí còn phát hiện ra rằng ông có thể dạy các loài chim “hòa nhập” với chính bản thân ông. Nếu con vật bỏ lỡ cơ hội then chốt này, chúng sẽ không thể hình thành đặc tính gắn bó trong cuộc sống sau này.Trong suốt những năm 1950, nhà tâm lý học Harry Harlow đã thực hiện hàng loạt các thí nghiệm khó chịu về hiện tượng xa rời/sống thiếu mẹ. Khỉ nâu con bị tách khỏi khỉ mẹ. Trong một số biến thể khác của thí nghiệm, khỉ con được cho ở cùng mới những “khỉ mẹ” dây thép (một mô hình người quấn bằng dây thép). Một con “khỉ mẹ” sẽ được quấn bằng vải trong khi một con khác sẽ cung cấp thức ăn. Harlow phát hiện thấy những con khỉ con ban đầu sẽ tìm kiếm sự thoải mái ấm áp ở khỉ mẹ vải và tìm kiếm thức ăn ở khỉ mẹ không quấn vải kia.Trong tất cả các trường hợp thí nghiệm, Harlow thấy rằng sự thiếu vắng người mẹ dẫn đến những thương tổn cảm xúc nghiêm trọng không thể bù đắp được. Những con khỉ con thiếu hụt tình mẫu tử này không thể hòa nhập với đồng loại, không thể hình thành những mối gắn bó mới, và cảm xúc của chúng bị hủy hoại một cách trầm trọng. Công trình của Harlow đã đang được áp dụng để lý giải cho quan điểm rằng trẻ con cũng có một giai đoạn cửa sổ quan trọng trong hình thành đặc tính gắn bó. Theo các nhà tâm lý học, khi những mối gắn bó này không được hình thành trong những năm đầu thời thơ ấu thì những thương tổn cảm xúc lâu dài sẽ xuất hiện.Các đề tài lớn thu hút sự quan tâm. Major Topics of InterestCác nhà tâm lý học so sánh đôi lúc sẽ tập trung vào hành vi cá nhân của một số loài động vật nhất định, như các loài linh trưởng, nhằm tìm hiểu kỹ hơn về các chủ đề như chăm chút bản thân, vui chơi, làm tổ, tích trữ, ăn uống, và các hành vi di chuyển. Các chủ đề khác mà các nhà tâm lý học so sánh tìm hiểu là các hành vi sinh sản, hòa nhập với đồng loại, hành vi xã hội, học tập, ý thức, giao tiếp, bản năng và động lực.– Sự tiến hóa: Các quá trình tiến hóa đã đóng góp như thế nào vào một số dạng thức hành vi nhất định?– Di truyền: Gen di truyền góp phần như thế nào vào hành vi?– Thích nghi và học tập: Môi trường góp phần hình thành hành vi như thế nào?Giao phối: Các giống loài khác nhau sinh sản như thế nào?– Nuôi dạy con cái: hành vi của cha mẹ góp phần vào hành vi của con cái như thế nào.Kết luận. Final thoughts.Ngành nghiên cứu về hành vi động vật có thể giúp ta hiểu sâu và rộng hơn về tâm lý học trên con người. Nghiên cứu về hành vi của động vật đưa đến nhiều phát kiến về hành vi con người, như nghiên cứu của Ivan Pavlov về điều kiện hóa cổ điển hay nghiên cứu của Harry Harlow trên khỉ nâu. Sinh viên các ngành sinh học và khoa học xã hội cũng thu được nhiều lợi ích từ việc học tâm lý học so sánh.Nguồn. Article SourcesGreenbert, G. Comparative psychology and ethology: A short history. In N.M. Seele (Ed.). Encyclopedia of the Sciences of Learning. New York: Springer; 2012.Nguồn: https://www.verywellmind.com/what-is-comparative-psychology-2795056Như Trang
          """

    # Chia nhỏ văn bản
    text_splitter = CharacterTextSplitter(
        separator="\n",
        chunk_size=2048,
        chunk_overlap=256,
        length_function=len
    )
    chunks = text_splitter.split_text(raw_text)

    # Tạo FAISS vector DB
    db = FAISS.from_texts(texts=chunks, embedding=embedding_model)
    db.save_local("vectorstores/test")
    return db

# Gọi hàm
if __name__ == "__main__":
    create_db_from_text()
